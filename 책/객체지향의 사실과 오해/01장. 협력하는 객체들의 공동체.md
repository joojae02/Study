# 01장. 협력하는 객체들의 공동체

> 시너지를 생각하라. 전체는 부분의 합보다 크다. 
> - 스티븐 코비

객체지향이란 실세계를 직접적이고 간접적으로 모델링할 수 있는 패러다임.

객체지향 소프트웨어는 실세계의 투영이며, 객체란 현실 세계에 존재하는 사물에 대한 추상화라는 것.
그러나 객체가 직접적으로 대응되는 실세계의 사물을 찾는것은 매우 어려움

객체지향의 목표는 모방이 아닌 새로운 세계를 창조하는 것

객체를 스스로 생각, 결정하는 생명체에 비유하는 것은 상태와 행위를 캡슐화하는 객체의 자율성을 설명하는데 효과적이다.

사람들이 **암묵적인 약속**과 **명시적인 계약**을 기반으로 **협력**, **목표를 달성** 하는 것은 **메세지**를 주고 받으며 공동의 목표를 위한 **협력**하는 관계를 설명하는데 적합하다.

## 협력하는 사람들

### 커피 공화국의 아침
카페를 예시로
> 캐시어 - "안녕하세요. 어떤걸로 주문하시겠어요?"
> 손님 - "따뜻한 아메리카노 주세요."
> 캐시어 - "사이즈는 레귤로로 드릴까요?"
> 손님 - ", 레귤로로 주세요"
> 캐시어 - "감사합니다. 결제 부탁드릴께요"

> 캐셔 -> 바리스타 커피 주문 전달
> 바리스타 -> 캐셔 완성된 커피 전달
> 캐셔 -> 손님 커피 전달

이 과정에서 손님, 캐셔, 바리스타 사이의 암묵적인 **협력** 관계가 존재한다.
주문한 커피를 손님에게 제공하기 위해 협력하는 과정에서 맡은 바 **책임**을 다한다.

- 손님: 커피를 주문할 책임
- 캐셔: 주문을 받는 책임
- 바리스타: 커피를 만드는 책임

역할, 책임, 협력은 모든 곳에 존재한다.
이것이 객체지향에서 가장 중요한 개념 세 가지이다.

### 요청과 응답으로 구성된 협력

대부분의 문제는 개인의 힘으로 해결하기 어려운 복잡한 일들이다.
따라서 다른 사람들의 도움을 받아 문제를 해결한다.

문제와 마주치면 문제 해결에 도움을 줄수 있는 사람에게 도움을 **요청**한다.

일반적으로 하나의 문제를 해결하기 위해 다수의 사람 혹은 역할이 필요하기 때문에 요청이 또 다른 요청을 유발한다.
따라서 요청은 연쇄적으로 발생한다.

1. 손님 -> 캐셔
	- 커피 주문
2. 캐셔 -> 바리스타
	- 커피 주문 전달

대충 이런 흐름?

그리고 요청을 받은 사람은 그 요청에 대해 **응답**한다.

1. 손님 -> 캐셔
	- 커피 주문
2. 캐셔 -> 바리스타
	- 커피 주문 전달
3. 바리스타 -> 캐셔
	- 커피 완성
4. 캐셔 -> 손님
	- 커피 완성

요청과 응답을 통해 다른 사람과 **혐력**할 수 있게 된다.

### 역할과 책임

사람들은 협력하는 과정속에서 특정한 **역할**을 부여 받는다.

이 역할이라는 단어는 의미적으로 **책임**을 부여받는다.
특정한 역할은 특정한 책임을 암시한다.

 - 손님: 커피를 주문할 책임
- 캐셔: 주문을 받는 책임
- 바리스타: 커피를 만드는 책임

역할과 책임은 협력이 원할하게 진행 되는데 핵심적인 요소이다.

이는 몇가지 개념을 제시하는데
- 여러 사람이 동일한 역할을 수행할 수 있다.
	- 어떤 캐셔, 바리스타가 되던지 상관 없음
- 역할은 대체 가능성을 의미한다.
	- **대체 가능**하다.
	- 캐셔가 두명이든 한명이든 동일한 역할을 수행한다면 상관 없다.
- 책임을 수행하는 방법은 자율적으로 선택할 수 있다.
	- 바리스타가 어떻게 커피를 만들든 커피만 나온다면 상관 없다.
	- 이를 **다형성**이라 한다.
- 한 사람이 동시에 여러 역할을 수행할 수 있다.
	- 캐셔, 바리스타를 동시에 할 수도 있다.

## 역할, 책임, 협력

### 기능을 구현하기 위해 협력하는 객체들

사람을 객체로
요청을 메세지로
요청을 처리하는 방법을 메서드로

### 역할과 책임을 수행하며 협력하는 객체들

객체들은 애플리케이션의 기능을 구현하기 위해 협력한다.

애플리케이션의 기능은 더 작은 책임으로 분할되고 책임은 적절한 역할을 수행할 수 있는 객체에 의해 수행된다.
이때 다른 객체들에게 도움을 요청하기도.

결국 객체지향 설계는 적절한 객체에게 적절한 책임을 할당하는 것에서 시작된다.
책임은 객체지향 설계의 품질을 결정하는 가장 중요한 요소다.

역할은 관련성 높은 책임의 집합이다. 
역할은 유연하고 재사용 가능한 협력 관계를 구축하는데 중요한 설계 요소다.
대체 가능한 역할과 책임은 객체지향 패러다임의 중요한 기반을 제공하는 다형성과도 깊이 연관되어있다.

## 협력 속에 사는 객체

객체 지향 애플리케이션의 윤곽을 결정하는 것은 역할, 책임, 협력이지만 실제로 협력에 참여하는 주체는 **객체**이다.

객체는 애플리케이션의 기능을 구현하기 위해 존재한다.
아주 작은 기증조차 객체 혼자 감당하기는 버거울 정도로 복잡하고 거대하기 때문에 일반적으로 다른 객체와의 협력을 통해 기능을 구현하게 된다.

여기서 객체는 두가지 사이에서 균형을 유지해야되는데

1. 객체는 충분히 **협력적**이어야 한다.
	- 외부의 도움을 무시한채 모든것을 스스로 처리하려는 God Object는 내부 복잡도에 의해 스스로 자멸하고 말것이다
2. 객체는 충분히 **자율적**이어야 한다.
	- 자기 스스로 원칙에 따라 스스로를 통제, 절제하여야 한다.

### 상태와 행동을 함께 지닌 자율적인 객체

흔히 객체를 **상태**와 **행동**을 함께 지닌 실체라고 정의한다.

객체가 협력에 참여하기 위해 어떤 행동을 해야한다면 그에 필요한 상태도 지여야한다는 말이다.
결국 스스로 판단 결정하는 자율적인 존재로 남기 위해서는 행동, 상태를 지니고 있어야한다

객체의 자율성은 내부와 외부를 구분하는 것으로 부터 시작한다.
객체의 내부는 스스로 관리하고 외부에서 간섭할 수 없게 해야한다.
외부에서는 접근이 허락된 수단만을 이용하여 의사소통해야한다.

> 객체는 다른 객체가 **무엇**을 수행하는지는 알 수 있지만 **어떻게** 수행하지는 알 수 없다.

### 협력과 메세지

객체는 협력을 위해 다른 객체에게 메시지를 전송하고 다른 객체로 부터 메시지를 수신한다.

객체지향의 세계에서 협력은 메시지를 전송하는 객체와 수신하는 객체 사이의 관계로 구성된다.

이떄 전송하는 객체를 **송신자**, 수신하는 객체를 **수신자**라고 한다.

### 메서드와 자율성

객체는 협력을 위해 메시지를 전송한다.
수신자는 메시지를 이해할 수 있는 지 여부를 판단후 미리 정해진 자신만의 방법에 따라 메시지를 처리한다.

이때 객체가 메시지를 처리하는 방법을 **메서드**라고 부른다.

객체지향 프로그래밍 언어에서 메서드는 클래스 안 함수 또는 프로시저를 통해 구현된다.
어쨋든 결과적으로 메시지에 대응되는 특정 메서드가 실행된다.

메시지를 선택할 수 있다는 점은 다른 프로그래밍 언어와 구분되는 특징중 하나다.

메시지와 메서드의 분리는 객체의 협력에 참여하는 객체들 간의 자율성을 증진시킨다.
이것은 **캡슐화**라는 개념과도 매우 깊이 관련되어 있다.

## 객체지향의 본질

그래서 객체지향이란?

- 객체지향이란 시스템을 상호작용하는 **자율적인 객체들의 공동체**로 바라보고 시스템을 분할하는 방법이다.
- 자율적인 객체란 **상태**와 **행위**를 지니며 스스로를 책임지는 객체이다.
- 객체는 시스템의 행위를 구현하기 위해 다른 객체와 **협력**한다.
- 각 객체는 협력 내에서 정해진 **역할**을 수행하며 역할은 관련된 **책임**의 집합이다.
- 객체는 다른 객체와 협력하기 위해 메시지를 전송하고, **메시지**를 수신한 객체는 처리하는데 적합한 **메서드**를 자율적으로 선택한다.

### 객체를 지향하라
많은 사람들은 객체지향이라는 말을 들으면 보통 클래스라는 단어를 떠올린다.

어떤 경우에는 클래스를 정의하는 방법과 클래스 사이의 상속에 초점을 둔다.

클래스가 매우 중요한 구성요소인 것은 분명하지만 핵심 개념이라기에는 무리가 있다.

> 중요한것은 객체의 역할, 책임, 협력이다!!

객체지향은 객체르르 지향하는 것이지 클래스를 지향하는 것이 아니다.
